# 복사
## 객체와 참조
1. Mutuable 객체: list, dict, set
2. Immutuable: int, float, str, tuple

파이썬에서 변수 할당은 객체에 대한 참조를 생성하는 과정.
- 변수는 객체의 메모리 주소를 가리키는 label 역할을 함
- '=' 연산자를 사용하여 변수에 값을 할당
- 할당 시 새로운 객체가 생성되거나, 기존 객체에 대한 참조가 생성됨

```python
# 가변 객체 예시
# 이건 복사가 아니다. 참조다.
a = [1, 2, 3, 4]
b = a
b[0] = 100

print(a)  # [100, 2, 3, 4]
print(b)  # [100, 2, 3, 4]
print(a is b) # True

# 불변 객체 예시
a = 20
b = a
b = 10

print(a)  # 20
print(b)  # 10
print(a is b) # False
```

### 가변/불변 메모리 관리 방식
- 가변 객체
  - 생성 후에도 그 내용을 수정할 수 있음
  - 객체의 내용이 변경되어도 같은 메모리 주소를 유지
- 불변 객체
  - 생성 후 그 값을 변경할 수 없음
  - 새로운 값을 할당하면 새로운 객체가 생성되고, 변수는 새 객체를 참조하게 됨

### 이러한 동작 방식의 이유
- 성능 최적화
  - 불변 객체는 변경이 불가능하므로, 여러 변수가 같은 객체를 안전하게 공유할 수 있음
  - 가변 객체는 내용 수정이 빈번한 경우 새 객체를 생성하지 않고 직접 수정하여 성능을 향상
- 메모리 효율성
  - 불변 객체는 동일한 값을 가진 여러 객체가 메모리를 공유할 수 있어 효율적
  - 가변 객체는 크기가 큰 데이터를 효율적으로 수정 가능

## 복사
### Shallow Copy
객체의 최상위 요소만 새로운 메모리에 복사하는 방법. 내부에 중첩된 객체가 있다면 그 객체의 참조만 복사됨.

#### 구현 방법
1. 리스트 슬라이싱
2. copy() 메서드
3. list() 함수

```python
a = [1, 2, 3]
b = a[:]
c = a.copy()

b[0] = 100
c[0] = 999
print(a)  # [1, 2, 3]
print(b)  # [100, 2, 3]
print(c)  # [999, 2, 3]

# Shallow copy의 한계: 변경 가능한 객체 안에 변경 가능한 객체가 있는 경우
a = [1, 2, [3, 4, 5]]
b = a[:]

b[0] = 999
print(a)  # [1, 2, [3, 4, 5]]
print(b)  # [999, 2, [3, 4, 5]]

print(f'a[2]와 b[2]가 같은 객체인가? {a[2] i b[2]}')  # True
```
#### 1차원 리스트와 다차원 리스트에서의 차이점
1차원 리스트는 shallow copy로 충분히 독립적인 복사본을 만들 수 있지만, **다차원 리스트는 최상위 리스트만 복사되고, 내부 리스트는 여전히 원본과 같은 객체를 참조한다.**

### Deep Copy
객체의 모든 수준의 요소를 새로운 메모리에 복사하는 방법. 중첩된 객체까지 모두 새로운 객체로 생성됨.

```python
import copy

a = [1, 2, [3, 4, 5]]
b = copy.deepcopy(a)

b[2][1] = 100
print(a)   # [1, 2, [3, 4, 5]]
print(b)  # [1, 2, [3, 100, 5]]
print(f'a[2]와 b[2]가 같은 객체인가? {a[2] is b[2]}') # False
```